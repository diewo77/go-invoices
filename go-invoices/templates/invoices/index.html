{{ define "title" }}{{ t "invoices" }}{{ end }}

{{ define "content" }}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">{{ t "invoices" }}</h1>
    <a href="/invoices/new" class="btn btn-primary">{{ t "create_invoice" }}</a>
</div>

<div class="card bg-base-100 shadow-xl">
    <div class="card-body p-0">
        <div class="overflow-x-auto">
            <table class="table table-zebra w-full">
                <thead>
                    <tr>
                        <th>{{ t "number" }}</th>
                        <th>{{ t "client" }}</th>
                        <th>{{ t "issue_date" }}</th>
                        <th>{{ t "status" }}</th>
                        <th class="text-right">{{ t "total_ttc" }}</th>
                        <th class="text-right">{{ t "actions" }}</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range .Invoices }}
                    <tr>
                        <td>
                            <a href="/invoices/{{ .ID }}" class="link link-primary font-mono font-medium">{{ .Number }}</a>
                        </td>
                        <td>{{ if .Client }}{{ .Client.Name }}{{ else }}---{{ end }}</td>
                        <td>{{ .IssueDate.Format "02/01/2006" }}</td>
                        <td>
                            <span class="badge {{ if eq .Status "draft" }}badge-ghost{{ else if eq .Status "final" }}badge-info{{ else if eq .Status "paid" }}badge-success{{ else }}badge-error{{ end }} badge-sm">
                                {{ t (printf "status_%s" .Status) }}
                            </span>
                        </td>
                        <td class="text-right font-medium">{{ .TotalTTC }} €</td>
                        <td class="text-right">
                            <div class="join">
                                {{ if .CanEdit }}
                                <a href="/invoices/{{ .ID }}/edit" class="btn btn-ghost btn-xs join-item">{{ t "edit" }}</a>
                                {{ end }}
                                <a href="/invoices/{{ .ID }}/pdf" class="btn btn-ghost btn-xs join-item" target="_blank">{{ t "pdf" }}</a>
                            </div>
                        </td>
                    </tr>
                    {{ else }}
                    <tr>
                        <td colspan="6" class="text-center py-8 text-base-content/50">
                            {{ t "no_invoices_found" }}
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </div>
    </div>
</div>

{{ if gt .Total .Limit }}
<div class="flex justify-center mt-6">
    <div class="join">
        {{ if gt .Page 1 }}
        <a href="?page={{ mul .Page -1 | add 1 }}&q={{ .Query }}" class="join-item btn btn-sm">«</a>
        {{ end }}
        <button class="join-item btn btn-sm">{{ t "page" }} {{ .Page }}</button>
        {{ if lt (mul .Page .Limit) .Total }}
        <a href="?page={{ add .Page 1 }}&q={{ .Query }}" class="join-item btn btn-sm">»</a>
        {{ end }}
    </div>
</div>
{{ end }}
{{ end }}
