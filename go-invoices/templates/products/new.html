{{ define "title" }}{{ t "new_product" }}{{ end }} {{ define "content" }}
<div class="max-w-2xl mx-auto">
  <div class="mb-6">
    <a href="/products" class="btn btn-ghost btn-sm mb-2"
      >← {{ t "back_to_list" }}</a
    >
    <h1 class="text-2xl font-bold">{{ t "new_product" }}</h1>
  </div>

  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <form action="/products" method="POST">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="form-control w-full">
            <label class="label"
              ><span class="label-text">{{ t "code" }} *</span></label
            >
            <input
              type="text"
              name="code"
              value="{{ .Product.Code }}"
              class="input input-bordered w-full font-mono {{ if .Errors.code }}input-error{{ end }}"
              required
            />
            {{ if .Errors.code }}<label class="label"
              ><span class="label-text-alt text-error"
                >{{ .Errors.code }}</span
              ></label
            >{{ end }}
          </div>
          <div class="form-control w-full">
            <label class="label"
              ><span class="label-text">{{ t "name" }} *</span></label
            >
            <input
              type="text"
              name="name"
              value="{{ .Product.Name }}"
              class="input input-bordered w-full {{ if .Errors.name }}input-error{{ end }}"
              required
            />
            {{ if .Errors.name }}<label class="label"
              ><span class="label-text-alt text-error"
                >{{ .Errors.name }}</span
              ></label
            >{{ end }}
          </div>
        </div>

        <div class="form-control w-full mt-4">
          <label class="label"
            ><span class="label-text">{{ t "description" }}</span></label
          >
          <textarea name="description" class="textarea textarea-bordered h-24">
{{ .Product.Description }}</textarea
          >
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
          <div class="form-control w-full">
            <label class="label"
              ><span class="label-text">{{ t "unit_price" }} *</span></label
            >
            <div class="join">
              <input
                type="number"
                step="0.01"
                name="unit_price"
                value="{{ .Product.UnitPrice }}"
                class="input input-bordered w-full join-item {{ if .Errors.unit_price }}input-error{{ end }}"
                required
              />
              <span class="btn btn-disabled join-item">€</span>
            </div>
            {{ if .Errors.unit_price }}<label class="label"
              ><span class="label-text-alt text-error"
                >{{ .Errors.unit_price }}</span
              ></label
            >{{ end }}
          </div>
          <div class="form-control w-full">
            <label class="label"
              ><span class="label-text">{{ t "unit" }}</span></label
            >
            <input
              type="text"
              name="unit"
              value="{{ if .Product.Unit }}{{ .Product.Unit }}{{ else }}unit{{ end }}"
              class="input input-bordered w-full"
            />
          </div>
          <div class="form-control w-full">
            <label class="label"
              ><span class="label-text">{{ t "vat_rate" }} (%)</span></label
            >
            <div class="join">
              <input
                type="number"
                step="0.1"
                name="vat_rate"
                value="{{ if .Product.VATRate }}{{ mul .Product.VATRate 100 }}{{ else }}20{{ end }}"
                class="input input-bordered w-full join-item"
              />
              <span class="btn btn-disabled join-item">%</span>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
          <div class="form-control w-full">
            <label class="label"
              ><span class="label-text">{{ t "category" }}</span></label
            >
            <input
              type="text"
              name="category"
              value="{{ .Product.Category }}"
              class="input input-bordered w-full"
            />
          </div>
          <div class="form-control w-full">
            <label class="label cursor-pointer justify-start gap-4 mt-9">
              <input
                type="checkbox"
                name="is_active"
                class="checkbox checkbox-primary"
                {{
                if
                or
                (not
                .Product.ID)
                .Product.IsActive
                }}checked{{
                end
                }}
              />
              <span class="label-text">{{ t "active" }}</span>
            </label>
          </div>
        </div>

        <div class="card-actions justify-end mt-8">
          <button type="submit" class="btn btn-primary">
            {{ t "create_product" }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{{ end }}
