{{ define "title" }}{{ t "profile_title" }}{{ end }} {{ define "content" }}
<main class="mx-auto max-w-2xl px-4 sm:px-6 lg:px-8 py-10">
  <div class="mb-4">
    <a href="/dashboard" class="btn btn-outline btn-xs normal-case"
      >‚Üê {{ t "profile_back" }}</a
    >
  </div>
  <h1 class="text-2xl font-semibold tracking-tight mb-1">
    {{ t "profile_title" }}
  </h1>
  <p class="text-sm text-slate-600 dark:text-slate-300 mb-6">
    Email: <strong>{{ .User.Email }}</strong>
  </p>
  {{ if .Flash }}
  <div
    id="flash"
    class="mb-4 rounded-md border border-green-300/40 bg-green-50 text-green-700 dark:border-green-400/30 dark:bg-green-900/30 dark:text-green-200 px-4 py-2 text-sm"
  >
    {{ .Flash }}
  </div>
  {{ end }} {{ if .Error }}
  <div
    class="mb-4 rounded-md border border-red-300/40 bg-red-50 text-red-700 dark:border-red-400/30 dark:bg-red-900/30 dark:text-red-200 px-4 py-2 text-sm"
  >
    {{ .Error }}
  </div>
  {{ end }}
  <div class="card bg-base-100 shadow-sm border border-base-200 p-6">
    <h2 class="text-lg font-medium mb-4">{{ t "profile_change_password" }}</h2>
    <form
      method="POST"
      action="/profile/password"
      class="space-y-4 max-w-sm"
      novalidate
    >
      <div>
        <label for="current" class="block text-xs font-medium mb-1"
          >{{ t "profile_current_password" }}</label
        >
        <input
          id="current"
          type="password"
          name="current"
          required
          class="input input-bordered input-sm w-full"
        />
      </div>
      <div>
        <label for="new" class="block text-xs font-medium mb-1"
          >{{ t "profile_new_password" }}</label
        >
        <input
          id="new"
          type="password"
          name="new"
          minlength="8"
          required
          class="input input-bordered input-sm w-full"
        />
      </div>
      <div>
        <label for="confirm" class="block text-xs font-medium mb-1"
          >{{ t "profile_confirm_password" }}</label
        >
        <input
          id="confirm"
          type="password"
          name="confirm"
          minlength="8"
          required
          class="input input-bordered input-sm w-full"
        />
      </div>
      <div class="pt-2">
        <button class="btn btn-primary btn-sm normal-case" type="submit">
          {{ t "profile_update_button" }}
        </button>
      </div>
    </form>
  </div>
</main>
<script>
  setTimeout(() => {
    const f = document.getElementById("flash");
    if (!f) return;
    f.style.transition = "opacity .45s";
    f.style.opacity = "0";
    setTimeout(() => f.remove(), 450);
  }, 3000);
</script>
{{ end }}
