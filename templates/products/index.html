{{ define "title" }}{{ t "products" }}{{ end }}

{{ define "content" }}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">{{ t "products" }}</h1>
    <a href="/products/new" class="btn btn-primary">{{ t "add_product" }}</a>
</div>

<div class="card bg-base-100 shadow-xl">
    <div class="card-body p-0">
        <div class="overflow-x-auto">
            <table class="table table-zebra w-full">
                <thead>
                    <tr>
                        <th>{{ t "code" }}</th>
                        <th>{{ t "name" }}</th>
                        <th>{{ t "unit_price" }}</th>
                        <th>{{ t "vat_rate" }}</th>
                        <th class="text-right">{{ t "actions" }}</th>
                    </tr>
                </thead>
                <tbody>
                    {{ range .Products }}
                    <tr>
                        <td><span class="badge badge-ghost font-mono">{{ .Code }}</span></td>
                        <td>
                            <a href="/products/{{ .ID }}" class="link link-primary font-medium">{{ .Name }}</a>
                        </td>
                        <td>{{ .UnitPrice }} € / {{ .Unit }}</td>
                        <td>{{ mul .VATRate 100 }}%</td>
                        <td class="text-right">
                            <div class="join">
                                <a href="/products/{{ .ID }}/edit" class="btn btn-ghost btn-xs join-item">{{ t "edit" }}</a>
                                <form action="/products/{{ .ID }}/delete" method="POST" class="inline" onsubmit="return confirm('{{ t "confirm_delete" }}')">
                                    <button type="submit" class="btn btn-ghost btn-xs text-error join-item">{{ t "delete" }}</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    {{ else }}
                    <tr>
                        <td colspan="5" class="text-center py-8 text-base-content/50">
                            {{ t "no_products_found" }}
                        </td>
                    </tr>
                    {{ end }}
                </tbody>
            </table>
        </div>
    </div>
</div>

{{ if gt .Total .Limit }}
<div class="flex justify-center mt-6">
    <div class="join">
        {{ if gt .Page 1 }}
        <a href="?page={{ mul .Page -1 | add 1 }}&q={{ .Query }}" class="join-item btn btn-sm">«</a>
        {{ end }}
        <button class="join-item btn btn-sm">{{ t "page" }} {{ .Page }}</button>
        {{ if lt (mul .Page .Limit) .Total }}
        <a href="?page={{ add .Page 1 }}&q={{ .Query }}" class="join-item btn btn-sm">»</a>
        {{ end }}
    </div>
</div>
{{ end }}
{{ end }}
